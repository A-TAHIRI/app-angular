<div class="pagetitle" >
  <h1>Commande {{ origin }}s</h1>
  <nav>
    <ol class="breadcrumb">
      <li class="breadcrumb-item"><a href="index.html">Home</a></li>
      <li class="breadcrumb-item"><a href="/dashboard">Dashboard</a></li>
      <li class="breadcrumb-item active">Commande{{ origin }}</li>
    </ol>
  </nav>
</div><!-- End Page Title -->

<section class="section dashboard position-relative" data-aos="fade-down"  >
  <div class="row">

    <!-- Top Selling -->
    <div class="col-12">
      <div class="card top-selling overflow-auto">
        <app-boutton-action
          [isImporterVisible]="false"

          (clickEvent)="nouvelleCommande()"
        ></app-boutton-action>

        <div class="card-body pb-0">
          <h5 class="card-title">Listes des commandes {{ origin + 's' }}</h5>
          <div class="accordion" id="accordionExample">
            <div class="col m-3 accordion-item" *ngFor="let cmd of listCommande let i =index" style="background-color: #e9ecef">
              <button class="btn btn-block text-left collapsed" type="button" data-bs-toggle="collapse"
                      [attr.data-bs-target]="'#collapse'+cmd.id"
                      (click)="findLignesCommande(cmd.id)"

                      aria-expanded="true"
                      aria-controls="collapseOne" style="width: 100%;box-shadow: none; border: none;  padding-top: 0; ">

                <app-detail-cmd-clt-frs

                  [commande]="cmd"
                  [i]="i"
                  [origin]="origin"
                ></app-detail-cmd-clt-frs>
              </button>

              <div [attr.id]="'collapse'+cmd.id" class="collapse" data-bs-parent="#accordionExample"
                   style="max-height: 300px;
                          overflow-y: scroll">
                <div class="card-body container position-relative z-1">

                  <app-detail-cmd
                    *ngFor="let ligne of mapLignesCommande.get(cmd.id) let i=index"
                    [ligneCommande]="ligne"
                    [i]="i"
                    [origin]="origin"


                  ></app-detail-cmd>
                </div>
              </div>
              <div class="card-footer" style="background-color: #e9ecef ;">
                <div class="row ">
                  <div class="col-md-6 text-center ">
                    <h5>{{ mapLignesCommande.get(cmd.id).length }} lignes de commande</h5>

                  </div>
                  <div class="col-md-6  text-center">
                    <h5>Total commande: {{ calculerTotalCommande(cmd.id) }}&nbsp;â‚¬</h5>
                  </div>
                </div>
              </div>


            </div>
          </div>

        </div>

      </div>
    </div><!-- End Top Selling -->
  </div>
  <div class="row mb-3">
    <div class=" col-md-12 text-center" data-aos="fade-up">
      <app-pagination></app-pagination>
    </div>
  </div>
</section>



